function checksize(){1==mlanimation?window.innerWidth<600?$("#mylife li").each(function(a,b){$(b).removeClass().addClass("mlleftout")}):$("#mylife li").each(function(a,b){a%2!=0?$(b).removeClass().addClass("mlrightout"):$(b).removeClass().addClass("mlleftout")}):window.innerWidth<600?$("#mylife li").each(function(a,b){$(b).removeClass().addClass("mlleftin")}):$("#mylife li").each(function(a,b){a%2!=0?$(b).removeClass().addClass("mlrightin"):$(b).removeClass().addClass("mlleftin")})}function swaparrows(){$("#lifeline").children().each(function(){var a=$(this).attr("type");if("trunk"==a&&window.innerWidth<600?($(this).attr("x1","40"),$(this).attr("x2","40")):"trunk"==a&&($(this).attr("x1","120"),$(this).attr("x2","120")),"circle"==a&&window.innerWidth<600?$(this).attr("cx","40"):"circle"==a&&$(this).attr("cx","120"),"arrow"==a||"path"==a||"dash"==a){var b=$(this).attr("d"),c=b;if(window.innerWidth<600)"topper"==$(this).attr("id")?c="M 10 0 L 40 0 L 40 30 L 40 0 L 70 0":"arrow"==a?(b.indexOf("M 120")>=0&&(c=c.replace("M 120","M 40")),b.indexOf("L 120")>=0&&(c=c.replace("L 120","L 40")),b.indexOf("L 105")>=0&&(c=c.replace("L 105","L 25")),b.indexOf("L 135")>=0&&(c=c.replace("L 135","L 25"))):(c=c.replace("M 120","M 40"),c=c.replace("L 120","L 40"),c=c.replace("L 120","L 40"),c=c.replace("L 120","L 40"),c=b.indexOf("L 100")>=0?c.replace("L 100","L 10"):c.replace("L 140","L 10")),$(this).attr("d",c);else{if("topper"==$(this).attr("id"))c="M 90 0  L 120 0  L 120 30  L 120 0  L 150 0";else if("arrow"==a){var d=$(this).attr("id");c=c.replace("M 40","M 120"),c=c.replace("L 40","L 120");var e=d.slice(-2);e.indexOf("h")>=0&&(e=e.replace("h","")),c=e%2==0?c.replace("L 25","L 105"):c.replace("L 25","L 135")}else{var f=$(this).attr("id"),g=f.slice(-2);g.indexOf("h")>=0&&(g=g.replace("h","")),c=c.replace("M 40","M 120"),c=c.replace("L 40","L 120"),c=c.replace("L 40","L 120"),c=c.replace("L 40","L 120"),g%2==0?c.indexOf("L 100")>=0||(c=c.replace("L 10","L 100")):c=c.replace("L 10","L 140")}$(this).attr("d",c)}}("date"==a||"text"==a)&&(window.innerWidth<600?($(this).attr("x","45"),$(this).attr("style","font-size:14px; font-family:Verdana;")):($(this).attr("x","120"),"title"==$(this).attr("id")?$(this).attr("style","font-size:40px; font-family:Verdana;"):$(this).attr("style","font-size:20px; font-family:Verdana;"))),"line"==a&&window.innerWidth<600&&"trunk"!=a?"basevert"==$(this).attr("id")||"extratop"==$(this).attr("id")?($(this).attr("x1","40"),$(this).attr("x2","40")):($(this).attr("x1","10"),$(this).attr("x2","70")):"trunk"!=a&&("basevert"==$(this).attr("id")||"extratop"==$(this).attr("id")?($(this).attr("x1","120"),$(this).attr("x2","120")):($(this).attr("x1","90"),$(this).attr("x2","150")))})}function createmylife(a){a.lineheight="undefined"!=typeof a.lineheight?a.lineheight:300,a.branchrad="undefined"!=typeof a.branchrad?a.branchrad:20,a.branchwidth="undefined"!=typeof a.branchwidth?a.branchwidth:"4",a.branchtype="undefined"!=typeof a.branchtype?a.branchtype:"circle",a.branchfill="undefined"!=typeof a.branchfill?a.branchfill:"none",a.treecolor="undefined"!=typeof a.treecolor?a.treecolor:"#181818",a.treewidth="undefined"!=typeof a.treewidth?a.treewidth:"4",a.animation="undefined"!=typeof a.animation?a.animation:!0,a.extratop="undefined"!=typeof a.extratop?a.extratop:!1,a.extratopsize="undefined"!=typeof a.extratopsize?a.extratopsize:0,a.title="undefined"!=typeof a.title?a.title:"",a.titlecolor="undefined"!=typeof a.titlecolor?a.titlecolor:"",mlanimation=a.animation,mlgets=1==a.extratop?a.extratopsize:0,mlbranchtype=a.branchtype;var b=$("#mylife").find("li").eq(0).outerWidth();mlpermbox=b;var c=$("#mylife").find("li").eq(0).outerHeight();c>a.lineheight&&(c=a.lineheight,$("#mylife li").each(function(a,b){$(b).css("height",c)})),eachmoment(a.lineheight,a.branchrad,b,c,a.treecolor,a.treewidth,a.branchwidth,a.branchtype,a.branchfill,a.extratop,a.extratopsize,a.title,a.titlecolor)}function eachmoment(a,b,c,d,e,f,g,h,i,j,k,l,m){$("#mylife li").each(function(n,o){if(0==n){var p=document.createElementNS("http://www.w3.org/2000/svg","svg");mlsvgNS=p.namespaceURI,p.setAttribute("id","lifeline"),$("#mylife").append(p);var q=document.createElementNS(mlsvgNS,"path");if(q.setAttribute("id","topper"),q.setAttribute("d","M 90 0  L 120 0  L 120 30  L 120 0  L 150 0"),q.setAttribute("stroke",e),q.setAttribute("stroke-width",f),q.setAttribute("opacity","1"),q.setAttribute("fill","none"),q.setAttribute("type","path"),$("#lifeline").append(q),""!=l){var r=document.createElementNS(mlsvgNS,"text");r.setAttribute("id","title"),r.setAttribute("type","text"),r.setAttribute("x",120),r.setAttribute("y",mltopt+b+5+50),r.setAttribute("style","font-size:50px; font-family:Verdana;"),r.setAttribute("fill",m),r.setAttribute("text-anchor","middle"),r.setAttribute("type","text"),$(r).text(l),$("#lifeline").append(r),mlgets=100}if(1==j){var s=document.createElementNS(mlsvgNS,"line");s.setAttribute("id","extratop"),s.setAttribute("x1","120"),s.setAttribute("x2","120"),s.setAttribute("y1",mlgets),s.setAttribute("y2",mlgets+k),s.setAttribute("stroke",e),s.setAttribute("stroke-width",f),s.setAttribute("opacity","1"),s.setAttribute("fill","none"),s.setAttribute("type","line"),$("#lifeline").append(s),mlgets+=k}}trunks(n,a,b,e,f),branches(n,a,b,d,e,g,h,i,$(o).attr("data-date"),f),positionli(n,a,b,c,d)}),addbase(a,e,f,b),swaparrows(),mldoneload=!0}function scroller(){mldidScroll=!0}function reposition(){if(1==mlanimation){var a=$(window).scrollTop();$("#mylife li").each(function(b,c){a+400>$(c).offset().top&&($(c).hasClass("mlleftout")&&$(c).removeClass().addClass("mlleftin"),$(c).hasClass("mlrightout")&&$(c).removeClass().addClass("mlrightin")),a+400<parseInt($(c).css("top"))&&($(c).hasClass("mlleftin")&&$(c).removeClass().addClass("mlleftout"),$(c).hasClass("mlrightin")&&$(c).removeClass().addClass("mlrightout"))})}}function trunks(a,b,c,d,e){var f=document.createElementNS(mlsvgNS,"line");f.setAttribute("id","line"+a),f.setAttribute("x1","120"),0==a?f.setAttribute("y1",b*a+mlgets):f.setAttribute("y1",b*a+2*c*a+mlgets),f.setAttribute("x2","120"),f.setAttribute("y2",parseInt(f.getAttribute("y1"))+b),f.setAttribute("stroke",d),f.setAttribute("stroke-width",e),f.setAttribute("opacity","1"),f.setAttribute("fill","none"),f.setAttribute("type","trunk"),$("#lifeline").append(f),mltopt=parseInt(f.getAttribute("y2"))}function branches(a,b,c,d,e,f,g,h,i,j){"circle"==g?circlebranch(a,b,c,d,e,f,g,h):"arrow"==g?arrowbranch(a,b,c,d,e,f,g,h):"date"==g?datebranch(a,b,c,d,e,f,g,h,i):"dash"==g&&linebranch(a,b,c,d,e,j,g,h)}function circlebranch(a,b,c,d,e,f,g,h){var i=document.createElementNS(mlsvgNS,"circle");i.setAttribute("id","branch"+a),i.setAttribute("type","circle"),i.setAttribute("cx","120"),i.setAttribute("cy",mltopt+c),i.setAttribute("r",c),i.setAttribute("stroke",e),i.setAttribute("stroke-width",f),i.setAttribute("opacity","1"),i.setAttribute("fill",h),$("#lifeline").append(i),$("#lifeline").css("height",parseInt(i.getAttribute("cy"))+4*c),$("#mylife").css("height",parseInt(i.getAttribute("cy"))+4*c+d)}function arrowbranch(a,b,c,d,e,f,g,h){var i=document.createElementNS(mlsvgNS,"path");i.setAttribute("id","branch"+a),i.setAttribute("type","arrow");var j=0;j=a%2==0?105:135,i.setAttribute("d","M 120 "+(mltopt-1)+" L "+j+" "+(mltopt+c)+" L 120 "+(mltopt+2*c+1)),i.setAttribute("stroke",e),i.setAttribute("stroke-width",f),i.setAttribute("opacity","1"),i.setAttribute("fill",h),i.setAttribute("data-bottom",mltopt+2*c),$("#lifeline").append(i),$("#lifeline").css("height",parseInt(i.getAttribute("data-bottom"))+4*c),$("#mylife").css("height",parseInt(i.getAttribute("data-bottom"))+4*c+d)}function datebranch(a,b,c,d,e,f,g,h,i){var j=document.createElementNS(mlsvgNS,"text");j.setAttribute("id","branch"+a),j.setAttribute("type","text"),j.setAttribute("x",120),j.setAttribute("y",mltopt+c+5),j.setAttribute("style","font-size:20px; font-family:Verdana;"),j.setAttribute("fill",e),j.setAttribute("text-anchor","middle"),$(j).text(i),$("#lifeline").append(j),$("#lifeline").css("height",parseInt(mltopt+b)+4*c-b),$("#mylife").css("height",parseInt(mltopt+b)+4*c)}function linebranch(a,b,c,d,e,f,g,h){var i=document.createElementNS(mlsvgNS,"path");i.setAttribute("id","branch"+a),i.setAttribute("type","dash"),a%2==0?i.setAttribute("d","M 120 "+(mltopt-1)+" L 120 "+(mltopt+c)+" L 100 "+(mltopt+c)+" L 120 "+(mltopt+c)+" L 120 "+(mltopt+2*c+1)):i.setAttribute("d","M 120 "+(mltopt-1)+" L 120 "+(mltopt+c)+" L 140 "+(mltopt+c)+" L 120 "+(mltopt+c)+" L 120 "+(mltopt+2*c+1)),i.setAttribute("stroke-width",f),i.setAttribute("stroke",e),i.setAttribute("opacity","1"),i.setAttribute("fill","transparent"),i.setAttribute("data-bottom",""),$("#lifeline").append(i),$("#lifeline").css("height",""),$("#mylife").css("height","")}function positionli(a,b,c,d,e){var f=$("#mylife").find("li").eq(a);checksize(),0==a?$(f).css("top",mltopt-e/2.5):$(f).css("top",mltopt-e/2.5)}function addbase(a,b,c,d){$("#lifeline").css("height",mltopt+2*a),$("#mylife").css("height",mltopt+2*a);var e=document.createElementNS(mlsvgNS,"line");e.setAttribute("id","basevert"),e.setAttribute("x1","120"),e.setAttribute("x2","120"),e.setAttribute("y1",mltopt+2*d),e.setAttribute("y2",parseInt(e.getAttribute("y1"))+a),e.setAttribute("stroke",b),e.setAttribute("stroke-width",c),e.setAttribute("opacity","1"),e.setAttribute("fill","none"),e.setAttribute("type","line"),$("#lifeline").append(e),mltopt=parseInt(e.getAttribute("y2"));var f=document.createElementNS(mlsvgNS,"line");f.setAttribute("id","basehor"),f.setAttribute("x1","90"),f.setAttribute("x2","150"),f.setAttribute("y1",mltopt),f.setAttribute("y2",mltopt),f.setAttribute("stroke",b),f.setAttribute("stroke-width",c),f.setAttribute("opacity","1"),f.setAttribute("fill","none"),f.setAttribute("type","line"),$("#lifeline").append(f)}var mltopt=0,mldidScroll=!1,mlpermbox=0,mlanimation,mldoneload=!1,mlgets=0,mlbranchtype="",mlsvgNS="";window.onscroll=scroller,$(document).ready(function(){$(window).on("resize",function(){checksize(),scroller(),1==mldoneload&&swaparrows()})}),setInterval(function(){mldidScroll&&(mldidScroll=!1,reposition())},250);